<!DOCTYPE html>
<html lang="en"><head>
<script src="lecture-08_files/libs/clipboard/clipboard.min.js"></script>
<script src="lecture-08_files/libs/quarto-html/tabby.min.js"></script>
<script src="lecture-08_files/libs/quarto-html/popper.min.js"></script>
<script src="lecture-08_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="lecture-08_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="lecture-08_files/libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="lecture-08_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.2.335">

  <meta name="author" content="Emi Tanaka">
  <title>ETC3250/5250: Introduction to Machine Learning</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="lecture-08_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="lecture-08_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="lecture-08_files/libs/revealjs/dist/theme/quarto.css" id="theme">
  <link rel="stylesheet" href="assets/tachyons-addon.css">
  <link rel="stylesheet" href="assets/custom.css">
  <script>window.backupDefine = window.define; window.define = undefined;</script><script src="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js"></script>
  <script>document.addEventListener("DOMContentLoaded", function () {
 var mathElements = document.getElementsByClassName("math");
 var macros = [];
 for (var i = 0; i < mathElements.length; i++) {
  var texText = mathElements[i].firstChild;
  if (mathElements[i].tagName == "SPAN") {
   katex.render(texText.data, mathElements[i], {
    displayMode: mathElements[i].classList.contains('display'),
    throwOnError: false,
    macros: macros,
    fleqn: false
   });
}}});
  </script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css">
  <link href="lecture-08_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="lecture-08_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="lecture-08_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="lecture-08_files/libs/revealjs/plugin/reveal-chalkboard/font-awesome/css/all.css" rel="stylesheet">
  <link href="lecture-08_files/libs/revealjs/plugin/reveal-chalkboard/style.css" rel="stylesheet">
  <link href="lecture-08_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-captioned.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-captioned) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-captioned.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-captioned .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-captioned .callout-caption  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-captioned.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-captioned.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-caption {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-caption {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-caption {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-captioned .callout-body > .callout-content > :last-child {
    margin-bottom: 0.5rem;
  }

  .callout.callout-captioned .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-captioned) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-caption {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-caption {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-caption {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-caption {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-caption {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
  <script src="lecture-08_files/libs/htmlwidgets-1.6.2/htmlwidgets.js"></script>
  <script src="lecture-08_files/libs/echarts4r-4.8.0/echarts-en.min.js"></script>
  <script src="lecture-08_files/libs/echarts4r-4.8.0/ecStat.min.js"></script>
  <script src="lecture-08_files/libs/echarts4r-4.8.0/dataTool.min.js"></script>
  <script src="lecture-08_files/libs/echarts4r-binding-0.4.4/echarts4r.js"></script>
  <script src="lecture-08_files/libs/echarts-gl-1.1.2/echarts-gl.min.js"></script>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="TOC">
<nav role="doc-toc"> 
<h2 id="toc-title"><span class="monash-blue"><em>Dimension reduction</em></span> - table of contents</h2>
<ul>
<li><a href="#/etc5523-title" id="/toc-etc5523-title"><br><span class="monash-blue">ETC3250/5250</span></a>
<ul>
<li><a href="#/dimension-reduction" id="/toc-dimension-reduction">Dimension reduction</a></li>
</ul></li>
<li><a href="#/high-dimensional-data" id="/toc-high-dimensional-data">High dimensional data</a></li>
<li><a href="#/summarising-many-variables" id="/toc-summarising-many-variables">Summarising many variables</a></li>
<li><a href="#/weighted-linear-combination" id="/toc-weighted-linear-combination">Weighted linear combination</a></li>
<li><a href="#/dimension-reduction-1" id="/toc-dimension-reduction-1">Dimension reduction</a></li>
<li><a href="#/toy-example" id="/toc-toy-example">Toy example</a></li>
<li><a href="#/geometrically" id="/toc-geometrically">Geometrically</a></li>
<li><a href="#/matrix-transformations" id="/toc-matrix-transformations">Matrix transformations</a>
<ul>
<li><a href="#/a-toy-data" id="/toc-a-toy-data"><i class="fas fa-football-ball"></i> A toy data</a></li>
<li><a href="#/scaling-matrix" id="/toc-scaling-matrix">Scaling matrix</a></li>
<li><a href="#/rotation-matrix" id="/toc-rotation-matrix">Rotation matrix</a></li>
<li><a href="#/shear-matrix" id="/toc-shear-matrix">Shear matrix</a></li>
<li><a href="#/inverting-transformations" id="/toc-inverting-transformations">Inverting transformations</a></li>
</ul></li>
<li><a href="#/matrix-decompositions" id="/toc-matrix-decompositions">Matrix decompositions</a>
<ul>
<li><a href="#/eigenvectors-and-eigenvalues" id="/toc-eigenvectors-and-eigenvalues">Eigenvectors and eigenvalues</a></li>
<li><a href="#/eigenvalue-decomposition" id="/toc-eigenvalue-decomposition">Eigenvalue decomposition</a></li>
<li><a href="#/singular-value-decomposition" id="/toc-singular-value-decomposition">Singular value decomposition</a></li>
</ul></li>
<li><a href="#/principal-components-analysis" id="/toc-principal-components-analysis">Principal components analysis</a>
<ul>
<li><a href="#/principal-components" id="/toc-principal-components">Principal components</a></li>
<li><a href="#/loading-or-weight-matrix" id="/toc-loading-or-weight-matrix">Loading or weight matrix</a></li>
<li><a href="#/first-principal-components" id="/toc-first-principal-components">First principal components</a></li>
<li><a href="#/second-principle-component" id="/toc-second-principle-component">Second principle component</a></li>
<li><a href="#/third-principle-component-and-beyond" id="/toc-third-principle-component-and-beyond">Third principle component and beyond</a></li>
<li><a href="#/pcs-eigenvectors-and-eigenvalues" id="/toc-pcs-eigenvectors-and-eigenvalues">PCs, eigenvectors and eigenvalues</a></li>
<li><a href="#/pcs-and-svd" id="/toc-pcs-and-svd">PCs and SVD</a></li>
<li><a href="#/rotated-data" id="/toc-rotated-data">Rotated data</a></li>
<li><a href="#/geometric-interpretation" id="/toc-geometric-interpretation">Geometric interpretation</a></li>
</ul></li>
<li><a href="#/an-application-to-yale-face-database" id="/toc-an-application-to-yale-face-database">An application to Yale face database</a>
<ul>
<li><a href="#/yale-face-database" id="/toc-yale-face-database"><i class="fas fa-database"></i> Yale face database</a></li>
<li><a href="#/sample-faces" id="/toc-sample-faces"><i class="fas fa-grimace"></i> Sample faces</a></li>
<li><a href="#/principle-component-analysis-with-r" id="/toc-principle-component-analysis-with-r"><i class="fab fa-r-project"></i> Principle component analysis with R</a></li>
<li><a href="#/summary-of-pca" id="/toc-summary-of-pca"><i class="fab fa-r-project"></i> Summary of PCA</a></li>
<li><a href="#/summary-of-pca-by-hand" id="/toc-summary-of-pca-by-hand"><i class="fab fa-r-project"></i> Summary of PCA “by hand”</a></li>
<li><a href="#/the-total-variation-of-pcs" id="/toc-the-total-variation-of-pcs">The total variation of PCs</a></li>
<li><a href="#/image-compression" id="/toc-image-compression">Image compression</a></li>
<li><a href="#/facial-recognition" id="/toc-facial-recognition">Facial recognition</a></li>
</ul></li>
<li><a href="#/an-application-to-wine-quality-data" id="/toc-an-application-to-wine-quality-data">An application to wine quality data</a>
<ul>
<li><a href="#/wine-quality-data" id="/toc-wine-quality-data"><i class="fas fa-database"></i> Wine quality data</a></li>
<li><a href="#/scaling-then-pca" id="/toc-scaling-then-pca"><i class="fab fa-r-project"></i> Scaling then PCA</a></li>
<li><a href="#/standardise-or-not" id="/toc-standardise-or-not">Standardise or not?</a></li>
<li><a href="#/proportion-of-variance-by-pcs" id="/toc-proportion-of-variance-by-pcs"><i class="fab fa-r-project"></i> Proportion of variance by PCs</a></li>
<li><a href="#/loading-matrix" id="/toc-loading-matrix"><i class="fab fa-r-project"></i> Loading matrix</a></li>
<li><a href="#/augment-pcs-to-data" id="/toc-augment-pcs-to-data"><i class="fab fa-r-project"></i> Augment PCs to data</a></li>
</ul></li>
<li><a href="#/visualisations" id="/toc-visualisations"><i class="fas fa-chart-line"></i> Visualisations</a>
<ul>
<li><a href="#/correlation-biplot" id="/toc-correlation-biplot"><i class="fab fa-r-project"></i> Correlation biplot</a></li>
<li><a href="#/distance-biplot" id="/toc-distance-biplot"><i class="fab fa-r-project"></i> Distance biplot</a></li>
<li><a href="#/interpreting-a-biplot" id="/toc-interpreting-a-biplot">Interpreting a biplot</a></li>
<li><a href="#/scree-plot" id="/toc-scree-plot">Scree plot</a></li>
</ul></li>
<li><a href="#/selecting-the-number-of-principal-components" id="/toc-selecting-the-number-of-principal-components">Selecting the number of principal components</a>
<ul>
<li><a href="#/elbow-method" id="/toc-elbow-method">Elbow method</a></li>
<li><a href="#/kaisers-rule" id="/toc-kaisers-rule">Kaiser’s rule</a></li>
<li><a href="#/interpreting-pcs" id="/toc-interpreting-pcs">Interpreting PCs</a></li>
</ul></li>
<li><a href="#/multi-dimensional-scaling" id="/toc-multi-dimensional-scaling">Multi-dimensional scaling</a>
<ul>
<li><a href="#/motivation" id="/toc-motivation">Motivation</a></li>
<li><a href="#/classical-mds" id="/toc-classical-mds">Classical MDS</a></li>
<li><a href="#/visualising-the-mds-output" id="/toc-visualising-the-mds-output">Visualising the MDS output</a></li>
<li><a href="#/distances" id="/toc-distances">Distances</a></li>
<li><a href="#/comparing-raw-and-mds-distances" id="/toc-comparing-raw-and-mds-distances">Comparing raw and MDS distances</a></li>
<li><a href="#/classical-mds-1" id="/toc-classical-mds-1">Classical MDS</a></li>
<li><a href="#/sammon-mapping" id="/toc-sammon-mapping">Sammon mapping</a></li>
<li><a href="#/modern-mds" id="/toc-modern-mds">Modern MDS</a></li>
</ul></li>
<li><a href="#/takeaways" id="/toc-takeaways"><i class="fas fa-key"></i> Takeaways</a></li>
</ul>
</nav>
</section>
<section id="etc5523-title" class="slide level2" data-background-image="images/bg-01.png">
<h2><br><span class="monash-blue">ETC3250/5250</span></h2>
<p><span class="monash-blue f1"><strong>Introduction to Machine Learning</strong></span></p>
<h3 id="dimension-reduction">Dimension reduction</h3>
<p>Lecturer: <em>Emi Tanaka</em></p>
<p>Department of Econometrics and Business Statistics</p>
</section>
<section id="high-dimensional-data" class="slide level2">
<h2>High dimensional data</h2>
<div>
<ul>
<li class="fragment"><i class="fas fa-ad"></i> In <strong>marketing</strong>, we may conduct a survey with a large number of questions about customer experience.</li>
<li class="fragment"><i class="fas fa-file-invoice-dollar"></i> In <strong>finance</strong>, there may be several ways to assess the credit worthiness of firms or individuals.</li>
<li class="fragment"><i class="fas fa-industry"></i> In <strong>economics</strong>, the development of a country or state can be measured by using multiple measures.</li>
</ul>
</div>
</section>
<section id="summarising-many-variables" class="slide level2">
<h2>Summarising many variables</h2>
<div>
<ul>
<li class="fragment">Summarising many variables into a single <strong>index</strong> can be useful.</li>
<li class="fragment">For example,
<ul>
<li class="fragment">In finance, a <strong>credit score</strong> summarises all the information about the likelihood of bankruptcy for a company.</li>
<li class="fragment">In economics, the <a href="https://hdr.undp.org/data-center/human-development-index#/indicies/HDI"><strong>Human Development Index</strong></a> (HDI) is a summary measure that takes nation’s income, education and health into account.</li>
<li class="fragment">In actuary, the <a href="https://actuaries.asn.au/microsites/climate-index/"><strong>Australian Actuaries Climate Index</strong></a> summarises the frequency of extreme weather.</li>
</ul></li>
</ul>
</div>
</section>
<section id="weighted-linear-combination" class="slide level2">
<h2>Weighted linear combination</h2>
<ul>
<li>A convenient way to combine variables is through a <em>linear combination</em> of variables.</li>
</ul>
<div class="fragment">
<ul>
<li>For example, your grade for this unit: <span class="math display">\text{Final} = w_1\text{Assign 1} + w_2\text{Assign 2} + w_3\text{Assign 2} + w_4\text{Exam}</span>
<ul>
<li>Here <span class="math inline">w_1</span>, <span class="math inline">w_2</span>, <span class="math inline">w_3</span> and <span class="math inline">w_4</span> are called <em><strong>weights</strong></em>.</li>
<li>In this unit, <span class="math inline">w_1 = w_2 = 0.1</span>, <span class="math inline">w_3 = 0.2</span> and <span class="math inline">w_4 = 0.6</span>.</li>
</ul></li>
</ul>
<div>
<ul>
<li class="fragment">What is a good way to choose weights?</li>
<li class="fragment">Do we also need to summarise data into a single variable?</li>
</ul>
</div>
</div>
</section>
<section id="dimension-reduction-1" class="slide level2">
<h2>Dimension reduction</h2>
<div>
<ul>
<li class="fragment"><strong>Dimension reduction</strong> involves <em>mapping the data into a lower dimensional space</em>.</li>
<li class="fragment">The <em>mapping</em>, or <em>projection</em>, involves learning the lower dimensional representation of the data.</li>
<li class="fragment">This can help in for example,
<ul>
<li class="fragment">efficiency in computation or memory,<br>
</li>
<li class="fragment">visualisation,</li>
<li class="fragment">noise removal, and</li>
<li class="fragment">so on.</li>
</ul></li>
</ul>
</div>
</section>
<section id="toy-example" class="slide level2">
<h2>Toy example</h2>
<div class="flex">
<div class="w-50">
<div class="cell" data-layout-align="center" data-hash="cache/lecture-08.rmarkdown/toy_15e3b374e7b4835ae0373815e49a17e6">
<div class="cell-output-display">
<table>
<thead>
<tr class="header">
<th style="text-align: right;">X</th>
<th style="text-align: right;">Y</th>
<th style="text-align: right;">Z</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">4</td>
<td style="text-align: right;">8</td>
<td style="text-align: right;">12</td>
</tr>
<tr class="even">
<td style="text-align: right;">3</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">9</td>
</tr>
<tr class="odd">
<td style="text-align: right;">5</td>
<td style="text-align: right;">10</td>
<td style="text-align: right;">15</td>
</tr>
<tr class="even">
<td style="text-align: right;">2</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">6</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">3</td>
</tr>
<tr class="even">
<td style="text-align: right;">6</td>
<td style="text-align: right;">12</td>
<td style="text-align: right;">18</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="w-50 pl3 fragment">
<p>Alternatively,</p>
<div class="flex">
<div class="w-20">
<p><span class="math display">\begin{bmatrix}1 &amp; 2 &amp; 3\end{bmatrix} \times</span></p>
</div>
<div class="w-80 pl3">
<div class="cell" data-layout-align="center" data-hash="cache/lecture-08.rmarkdown/toy2_a7f27c333980c86824519c381a415837">
<div class="cell-output-display">
<table>
<thead>
<tr class="header">
<th style="text-align: right;">t1</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">4</td>
</tr>
<tr class="even">
<td style="text-align: right;">3</td>
</tr>
<tr class="odd">
<td style="text-align: right;">5</td>
</tr>
<tr class="even">
<td style="text-align: right;">2</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: right;">6</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="geometrically" class="slide level2">
<h2>Geometrically</h2>
<div class="flex">
<div class="w-50">
<p>Original: 3D space</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="echarts4r html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-bc2d5a829fac7137ba45" style="width:100%;height:500px;"></div>
<script type="application/json" data-for="htmlwidget-bc2d5a829fac7137ba45">{"x":{"theme":"","tl":false,"draw":true,"renderer":"canvas","events":[],"buttons":[],"opts":{"zAxis3D":[{"show":true}],"grid3D":[{"show":true}],"xAxis3D":[{"type":"value"}],"yAxis3D":[{"type":"value"}],"series":[{"type":"scatter3D","coordinateSystem":"cartesian3D","data":[{"value":[1,2,3]},{"value":[2,4,6]},{"value":[3,6,9]},{"value":[4,8,12]},{"value":[5,10,15]},{"value":[6,12,18]}]},{"type":"line3D","data":[{"value":[1,2,3]},{"value":[2,4,6]},{"value":[3,6,9]},{"value":[4,8,12]},{"value":[5,10,15]},{"value":[6,12,18]}],"name":null,"smooth":true}]},"dispose":true},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</div>
<div class="w-50 pl3">
<p>Projection: 1D space</p>
<div class="cell" data-layout-align="center" data-hash="cache/lecture-08.rmarkdown/vis-1d_fa2bc595444a9340533839de0247baa9">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/lecture-08.rmarkdown/vis-1d-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
<p><span class="math display">\mathbb{R}^3 \rightarrow \mathbb{R}</span></p>
<p><span class="fragment">But how do we find this projection?</span></p>
</div>
</div>
</section>
<section>
<section id="matrix-transformations" class="title-slide slide level1 mcenter center" data-background-color="#006DAE">
<h1>Matrix transformations</h1>

</section>
<section id="a-toy-data" class="slide level2">
<h2><i class="fas fa-football-ball"></i> A toy data</h2>
<div class="flex">
<div class="w-50">
<div class="cell" data-layout-align="center" data-hash="cache/lecture-08.rmarkdown/toy-circle-grid_c248bc2302af160c5fd5e4f833f0bea8">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 600 × 2
      x1    x2
   &lt;dbl&gt; &lt;dbl&gt;
 1    -2 -2   
 2    -2 -1.92
 3    -2 -1.84
 4    -2 -1.76
 5    -2 -1.67
 6    -2 -1.59
 7    -2 -1.51
 8    -2 -1.43
 9    -2 -1.35
10    -2 -1.27
# ℹ 590 more rows</code></pre>
</div>
</div>
</div>
<div class="w-50 pl3">
<div class="cell" data-layout-align="center" data-hash="cache/lecture-08.rmarkdown/plot-circle-grid_e9517cf376308d8e4200550499d98ee9">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/lecture-08.rmarkdown/plot-circle-grid-1.png" width="384"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="scaling-matrix" class="slide level2">
<h2>Scaling matrix</h2>
<div class="flex">
<div class="w-50">
<ul>
<li>A diagonal matrix where non-diagonal elements are all zero, e.g.&nbsp; <span class="math display">\mathbf{S}_{2\times2} = \begin{bmatrix}s_{x_1} &amp; 0 \\ 0 &amp; s_{x_2}\end{bmatrix}.</span></li>
<li>Here we apply the transformation <span class="math inline">\mathbf{X}_{n\times 2}\mathbf{S}_{2\times2}</span> where <span class="math display">\mathbf{S}_{2\times2} = \begin{bmatrix}1.5 &amp; 0 \\ 0 &amp; 0.5\end{bmatrix}.</span></li>
</ul>
</div>
<div class="w-50 pl3 fragment">
<div class="cell" data-layout-align="center" data-hash="cache/lecture-08.rmarkdown/scale-grid_e414a1aca40a1295cc2fae254f7693d2">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/lecture-08.rmarkdown/scale-grid-1.gif"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="rotation-matrix" class="slide level2">
<h2>Rotation matrix</h2>
<div class="flex">
<div class="w-50">
<ul>
<li>Applying the transformation <span class="math inline">\mathbf{X}_{n\times 2}\mathbf{R}_{2\times 2}</span> where <span class="math display">\mathbf{R}_{2\times2} = \begin{bmatrix}\cos(\theta) &amp; -\sin(\theta) \\\sin(\theta) &amp; \cos(\theta) \end{bmatrix}</span> rotates the data around the origin by an angle of <span class="math inline">\theta</span> in the counterclockwise direction.</li>
</ul>
</div>
<div class="w-50 pl3 fragment">
<div class="cell" data-layout-align="center" data-hash="cache/lecture-08.rmarkdown/rotate-grid_8aa452fc40c7078f2ca7b2477b8e7d24">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/lecture-08.rmarkdown/rotate-grid-1.gif"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="shear-matrix" class="slide level2">
<h2>Shear matrix</h2>
<div class="flex">
<div class="w-50">
<ul>
<li>A shear matrix can tilt an axis, e.g.&nbsp;<span class="math display">\mathbf{H}_{2\times 2} = \begin{bmatrix}1 &amp; \lambda \\ 0 &amp; 1\end{bmatrix}</span> tilts the <span class="math inline">x</span>-axis.</li>
<li>The shear matrix below will tilt the <span class="math inline">y</span>-axis dimension: <span class="math display">\mathbf{H}_{2\times 2} = \begin{bmatrix}1 &amp; 0 \\ \lambda &amp; 1\end{bmatrix}.</span></li>
</ul>
</div>
<div class="w-50 pl3 fragment">
<div class="cell" data-layout-align="center" data-hash="cache/lecture-08.rmarkdown/shear-grid_e47b2f8f2b17a4792b9a721bfe98995f">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/lecture-08.rmarkdown/shear-grid-1.gif"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="inverting-transformations" class="slide level2">
<h2>Inverting transformations</h2>
<ul>
<li>Suppose we have a new transformed data <span class="math display">\hat{\mathbf{X}}_{n\times p} = \mathbf{X}_{n\times p}\mathbf{W}_{p\times p}.</span></li>
</ul>
<div class="fragment">
<ul>
<li>Then we can get the data in the original measurement by applying: <span class="math display">\mathbf{X}_{n\times p} = \hat{\mathbf{X}}_{n\times p}\mathbf{W}^{-1}_{p\times p}</span> provided that <span class="math inline">\mathbf{W}^{-1}</span> exists.</li>
</ul>
</div>
</section></section>
<section>
<section id="matrix-decompositions" class="title-slide slide level1 mcenter center" data-background-color="#006DAE">
<h1>Matrix decompositions</h1>

</section>
<section id="eigenvectors-and-eigenvalues" class="slide level2">
<h2>Eigenvectors and eigenvalues</h2>
<ul>
<li>For a square matrix, <span class="math inline">\mathbf{A}</span>, if there exists a vector <span class="math inline">\boldsymbol{v}</span> and scalar value <span class="math inline">\lambda</span> such that <span class="math display">\mathbf{A}\boldsymbol{v} = \lambda\boldsymbol{v}</span> then <span class="math inline">\boldsymbol{v}</span> is an <span class="monash-blue"><strong>eigenvector</strong></span> of <span class="math inline">\mathbf{A}</span> with <span class="monash-blue"><strong>eigenvalue</strong></span> of <span class="math inline">\lambda</span>.</li>
</ul>
</section>
<section id="eigenvalue-decomposition" class="slide level2">
<h2>Eigenvalue decomposition</h2>
<div>
<ul>
<li class="fragment"><p>Also called <strong>eigendecomposition</strong>, <strong>diagonalisation</strong> or <strong>spectral decomposition</strong>.</p></li>
<li class="fragment"><p>For a positive semi-definite symmetric matrix, <span class="math inline">\mathbf{V}</span>, there exists an orthogonal matrix <span class="math inline">\mathbf{Q}</span> and a diagonal matrix <span class="math inline">\mathbf{\Lambda}</span> such that <span class="monash-blue"><span class="math display">\mathbf{V} = \mathbf{Q}\mathbf{\Lambda}\mathbf{Q}^{-1}.</span></span></p></li>
<li class="fragment"><p><span class="math inline">\mathbf{\Lambda}</span> is a diagonal matrix where the diagonal entries correspond to <strong>eigenvalues</strong>.</p></li>
<li class="fragment"><p>The columns of <span class="math inline">\mathbf{Q}</span> are <strong>eigenvectors</strong> of <span class="math inline">\mathbf{V}</span> corresponding to the eigenvalues in <span class="math inline">\mathbf{\Lambda}</span>.</p></li>
</ul>
</div>
</section>
<section id="singular-value-decomposition" class="slide level2">
<h2>Singular value decomposition</h2>
<p><span class="monash-blue"><span class="math display">\mathbf{A}_{m\times n} = \mathbf{U}_{m\times m}\mathbf{\Sigma}_{m\times n}\mathbf{V}^\top_{n\times n}</span></span></p>
<ul>
<li>where
<ul>
<li><span class="math inline">\mathbf{V}</span> is an orthogonal matrix (i.e.&nbsp;<span class="math inline">\mathbf{V}^\top\mathbf{V} = \mathbf{I}</span>),</li>
<li><span class="math inline">\mathbf{\Sigma}</span> is a rectangular diagonal matrix, and</li>
<li><span class="math inline">\mathbf{U}</span> is another orthogonal matrix.</li>
</ul></li>
</ul>
<div class="fragment">
<ul>
<li>SVD is the same as eigenvalue decomposition if <span class="math inline">\mathbf{A}</span> is symmetric positive-semidefinite matrix.</li>
</ul>
</div>
</section></section>
<section>
<section id="principal-components-analysis" class="title-slide slide level1 mcenter center" data-background-color="#006DAE">
<h1>Principal components analysis</h1>

</section>
<section id="principal-components" class="slide level2">
<h2>Principal components</h2>
<ul>
<li>The <span class="math inline">k</span>-th <span class="monash-blue"><strong>principal component</strong></span> is a <em>linear combination of variables</em>: <span class="math display">\boldsymbol{t}_k =
w_{1k}\boldsymbol{x}_1 + w_{2k}\boldsymbol{x}_2 + \dots + w_{pk}\boldsymbol{x}_p = \mathbf{X}_{n\times p}\boldsymbol{w}_k</span> where <span class="math inline">\mathbf{X}_{n\times p} = \begin{bmatrix}\boldsymbol{x}_1 &amp; \cdots &amp; \boldsymbol{x}_p \end{bmatrix}</span> and <span class="math inline">\boldsymbol{w}_k = (w_{1k}, \dots, w_{pk})^\top</span>.</li>
</ul>
<div class="fragment">
<ul>
<li>The elements in <span class="math inline">\boldsymbol{w}_k</span> are referred to as the <span class="monash-blue"><strong>loadings</strong></span> (or weights) of the <span class="math inline">k</span>-th principal component.</li>
</ul>
</div>
<div class="fragment">
<ul>
<li><i class="fas fa-exclamation-circle"></i> This does assumes all variables are numeric!</li>
</ul>
</div>
</section>
<section id="loading-or-weight-matrix" class="slide level2">
<h2>Loading or weight matrix</h2>
<ul>
<li>The matrix <span class="math inline">\mathbf{W} = \begin{bmatrix}\boldsymbol{w}_1 &amp; \cdots &amp; \boldsymbol{w}_{\min\{n,p\}}\end{bmatrix}</span> is referred to as the <span class="monash-blue"><strong>loading or weight matrix</strong></span>.</li>
<li>We obtain the principal component scores (or rotated data) as <span class="math display">\mathbf{T} = \begin{bmatrix} \boldsymbol{t}_1 &amp; \cdots &amp; \boldsymbol{t}_{\min\{n,p\}}  \end{bmatrix}  = \mathbf{X}\mathbf{W}.</span></li>
</ul>
</section>
<section id="first-principal-components" class="slide level2">
<h2>First principal components</h2>
<ul>
<li>The loadings for the <span class="monash-blue"><strong>first principal component scores</strong></span> are found by maximising the <em>projected variance</em>:</li>
</ul>
<p><span class="math display">\boldsymbol{w}_1 = \argmax_{\boldsymbol{w}_1} \big\{var(\boldsymbol{t}_1)\big\} = \argmax_{\boldsymbol{w}_1} \big\{var(\mathbf{X}\boldsymbol{w}_1)\big\}.</span></p>
<ul>
<li>Subject to <span class="math inline">\sum_{j=1}^pw_{j1}^2 = 1</span>.</li>
</ul>
</section>
<section id="second-principle-component" class="slide level2">
<h2>Second principle component</h2>
<ul>
<li>The loadings of the <span class="monash-blue"><strong>second principal component</strong></span> is found from</li>
</ul>
<p><span class="math display">\boldsymbol{w}_2 = \argmax_{\boldsymbol{w}_2} \big\{var(\boldsymbol{t}_2)\big\} = \argmax_{\boldsymbol{w}_2} \big\{var(\mathbf{X}\boldsymbol{w}_2)\big\}.</span></p>
<ul>
<li>such that <span class="math inline">\displaystyle\sum_{j=1}^pw_{j2}^2 = 1</span> <span class="fragment">and <span class="monash-blue"><span class="math inline">\boldsymbol{w}_1^\top \boldsymbol{w}_2 = 0</span> <span class="f2">(i.e.&nbsp;<span class="math inline">\boldsymbol{t}_2</span> is uncorrelated with <span class="math inline">\boldsymbol{t}_1</span>)</span></span>.</span></li>
</ul>
</section>
<section id="third-principle-component-and-beyond" class="slide level2">
<h2>Third principle component and beyond</h2>
<ul>
<li>The loadings of the <span class="monash-blue"><strong>third principal component</strong></span> is found from</li>
</ul>
<p><span class="math display">\boldsymbol{w}_3 = \argmax_{\boldsymbol{w}_3} \big\{var(\boldsymbol{t}_3)\big\} = \argmax_{\boldsymbol{w}_3} \big\{var(\mathbf{X}\boldsymbol{w}_3)\big\}.</span></p>
<ul>
<li>such that <span class="math inline">\displaystyle\sum_{j=1}^pw_{j3}^2 = 1</span> and <span class="monash-blue"><span class="math inline">\boldsymbol{t}_3</span> is uncorrelated with both <span class="math inline">\boldsymbol{t}_1</span> and <span class="math inline">\boldsymbol{t}_2</span></span>.</li>
</ul>
<div class="fragment">
<ul>
<li>And so on for other higher order PCs.</li>
</ul>
</div>
</section>
<section id="pcs-eigenvectors-and-eigenvalues" class="slide level2">
<h2>PCs, eigenvectors and eigenvalues</h2>
<div>
<ul>
<li class="fragment">Suppose you have a <span class="math inline">n\times p</span> data matrix <span class="math inline">\mathbf{X}</span> with each column centered around 0.</li>
<li class="fragment">The <strong>empirical variance-covariance matrix</strong> of the variables is given as <span class="math inline">\frac{1}{n}\mathbf{X}^\top\mathbf{X}.</span></li>
<li class="fragment">For PCA, we maximise <span class="math inline">\frac{1}{n}\boldsymbol{w}_k^\top\mathbf{X}^\top\mathbf{X}\boldsymbol{w}_k</span> such that <span class="math inline">\boldsymbol{w}_k^\top\boldsymbol{w}_k = 1</span>.</li>
<li class="fragment">The Lagrangian for this is <span class="math inline">\frac{1}{n}\boldsymbol{w}_k^\top\mathbf{X}^\top\mathbf{X}\boldsymbol{w}_k-\lambda(\boldsymbol{w}_k^\top\boldsymbol{w}_k - 1)</span>.</li>
<li class="fragment">The partial derivative with respect to <span class="math inline">\boldsymbol{w}_k</span> and setting it to zero is <span class="math inline">2(\frac{1}{n}\mathbf{X}^\top\mathbf{X} - \lambda\mathbf{I}_n) \boldsymbol{w}_k = 0</span>.</li>
<li class="fragment">Therefore, <span class="math inline">\boldsymbol{w}_k</span> must be an eigenvector of <span class="math inline">\mathbf{X}^\top\mathbf{X}</span> with eigenvalue of <span class="math inline">n\lambda</span>.</li>
</ul>
</div>
</section>
<section id="pcs-and-svd" class="slide level2">
<h2>PCs and SVD</h2>
<div>
<ul>
<li class="fragment">The PC scores are given as: <span class="math inline">\mathbf{T} = \mathbf{X}\mathbf{W}</span>.</li>
<li class="fragment">Let <span class="math inline">\mathbf{X} = \mathbf{U}\mathbf{\Sigma}\mathbf{V}^\top</span>.</li>
<li class="fragment">It turns out that:
<ul>
<li class="fragment">the columns of <span class="math inline">\mathbf{U}</span> are the eigenvectors of <span class="math inline">\mathbf{X}\mathbf{X}^\top</span>,</li>
<li class="fragment">the squares of the diagonal elements of <span class="math inline">\mathbf{\Sigma}</span> are the eigenvalues of both <span class="math inline">\mathbf{X}^\top\mathbf{X}</span> and <span class="math inline">\mathbf{X}\mathbf{X}^\top</span>,</li>
<li class="fragment">the columns of <span class="math inline">\mathbf{V}</span> are the eigenvectors of <span class="math inline">\mathbf{X}^\top\mathbf{X}</span>, and</li>
<li class="fragment"><span class="math inline">\mathbf{W} = \mathbf{V}</span>!</li>
</ul></li>
</ul>
</div>
</section>
<section id="rotated-data" class="slide level2">
<h2>Rotated data</h2>
<div>
<ul>
<li class="fragment">And so <span class="math inline">\mathbf{T} = \mathbf{U}\mathbf{\Sigma}\mathbf{W}^\top\mathbf{W} = \mathbf{U}\mathbf{\Sigma}</span>.</li>
<li class="fragment">Note that then <span class="math inline">\mathbf{X} = \mathbf{T}\mathbf{W}^\top</span>.</li>
<li class="fragment">You’ll go through more of this in the tutorial.</li>
</ul>
</div>
</section>
<section id="geometric-interpretation" class="slide level2">
<h2>Geometric interpretation</h2>
<p>Alternatively,</p>
<ul>
<li>Let <span class="math inline">\hat{\mathbf{X}}_2 = \mathbf{X} - \mathbf{X}\boldsymbol{w}_1\boldsymbol{w}_1^\top</span>.</li>
<li>Then <span class="math display">\boldsymbol{w}_2 = \argmax_{\boldsymbol{w}_2} \big\{var(\hat{\mathbf{X}}_2\boldsymbol{w}_2)\big\}\text{ such that }\sum_{j=1}^pw_{j2}^2 = 1.</span></li>
</ul>
</section></section>
<section>
<section id="an-application-to-yale-face-database" class="title-slide slide level1 mcenter center" data-background-color="#006DAE">
<h1>An application to Yale face database</h1>

</section>
<section id="yale-face-database" class="slide level2">
<h2><i class="fas fa-database"></i> Yale face database</h2>
<ul>
<li>The data is from P. Belhumeur, J. Hespanha, D. Kriegman, “Eigenfaces vs.&nbsp;Fisherfaces: Recognition Using Class Specific Linear Projection,” IEEE Transactions on Pattern Analysis and Machine Intelligence, July 1997, pp.&nbsp;711-720.</li>
<li>The data consists of 15 subjects each under 11 conditions (e.g.&nbsp;“happy”, “sad”, “centerlight”), so a total of 165 images.</li>
<li>Each image is 320 (width) x 243 (height) = 77,760 pixels (features).</li>
<li>Note that here <span class="math inline">n &lt;&lt; p</span>!</li>
</ul>
<div class="cell skimr" data-layout-align="center" data-hash="cache/lecture-08.rmarkdown/yaleface_9429fa4a11d42560c2fa31683a53f01d">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a>yalefaces <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"https://emitanaka.org/iml/data/yalefaces.csv"</span>)</span>
<span id="cb2-2"><a href="#cb2-2"></a><span class="fu">dim</span>(yalefaces)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]   165 77762</code></pre>
</div>
</div>
</section>
<section id="sample-faces" class="slide level2">
<h2><i class="fas fa-grimace"></i> Sample faces</h2>
<div class="cell" data-layout-align="center" data-hash="cache/lecture-08.rmarkdown/yaleface-vis_bbd15a0280cacc977bb09af7587e17a0">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a>imagedata_to_plotdata <span class="ot">&lt;-</span> <span class="cf">function</span>(<span class="at">data =</span> yalefaces, </span>
<span id="cb4-2"><a href="#cb4-2"></a>                                  <span class="at">w =</span> <span class="dv">320</span>, </span>
<span id="cb4-3"><a href="#cb4-3"></a>                                  <span class="at">h =</span> <span class="dv">243</span>, </span>
<span id="cb4-4"><a href="#cb4-4"></a>                                  <span class="at">which =</span> <span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">165</span>, <span class="dv">15</span>)) {</span>
<span id="cb4-5"><a href="#cb4-5"></a>  data <span class="sc">%&gt;%</span> </span>
<span id="cb4-6"><a href="#cb4-6"></a>    <span class="fu">mutate</span>(<span class="at">id =</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">n</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb4-7"><a href="#cb4-7"></a>    <span class="fu">filter</span>(id <span class="sc">%in%</span> which) <span class="sc">%&gt;%</span> </span>
<span id="cb4-8"><a href="#cb4-8"></a>    <span class="fu">pivot_longer</span>(<span class="fu">starts_with</span>(<span class="st">"V"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb4-9"><a href="#cb4-9"></a>    <span class="fu">mutate</span>(<span class="at">col =</span> <span class="fu">rep</span>(<span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span>w, <span class="at">each =</span> h), <span class="fu">n_distinct</span>(id)),</span>
<span id="cb4-10"><a href="#cb4-10"></a>           <span class="at">row =</span> <span class="fu">rep</span>(<span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span>h, <span class="at">times =</span> w), <span class="fu">n_distinct</span>(id)))</span>
<span id="cb4-11"><a href="#cb4-11"></a>}</span>
<span id="cb4-12"><a href="#cb4-12"></a></span>
<span id="cb4-13"><a href="#cb4-13"></a>gfaces <span class="ot">&lt;-</span> <span class="fu">imagedata_to_plotdata</span>(yalefaces) <span class="sc">%&gt;%</span> </span>
<span id="cb4-14"><a href="#cb4-14"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(col, row)) <span class="sc">+</span></span>
<span id="cb4-15"><a href="#cb4-15"></a>    <span class="fu">geom_tile</span>(<span class="fu">aes</span>(<span class="at">fill =</span> value)) <span class="sc">+</span> </span>
<span id="cb4-16"><a href="#cb4-16"></a>    <span class="fu">facet_wrap</span>(<span class="sc">~</span>subject <span class="sc">+</span> type, <span class="at">nrow =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb4-17"><a href="#cb4-17"></a>    <span class="fu">scale_y_reverse</span>() <span class="sc">+</span></span>
<span id="cb4-18"><a href="#cb4-18"></a>    <span class="fu">theme_void</span>(<span class="at">base_size =</span> <span class="dv">18</span>) <span class="sc">+</span></span>
<span id="cb4-19"><a href="#cb4-19"></a>    <span class="fu">guides</span>(<span class="at">fill =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb4-20"><a href="#cb4-20"></a>    <span class="fu">coord_equal</span>()</span>
<span id="cb4-21"><a href="#cb4-21"></a></span>
<span id="cb4-22"><a href="#cb4-22"></a>gfaces</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/lecture-08.rmarkdown/yaleface-vis-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="principle-component-analysis-with-r" class="slide level2 scrollable">
<h2><i class="fab fa-r-project"></i> Principle component analysis with R</h2>
<p><span class="f4 absolute top-1 right-1" style=""><i class="fas fa-long-arrow-alt-down"></i> scroll</span></p>
<ul>
<li>There are several functions for doing principal components analysis in R – we use <code>prcomp()</code>.</li>
</ul>
<div class="cell" data-layout-align="center" data-hash="cache/lecture-08.rmarkdown/yale-pc_073a32dca9737f7d928714df92da4f33">
<div class="sourceCode cell-code" id="cb5" data-code-line-numbers="3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a>yalefaces_x <span class="ot">&lt;-</span> yalefaces <span class="sc">%&gt;%</span></span>
<span id="cb5-2"><a href="#cb5-2"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(subject, type))</span>
<span id="cb5-3"><a href="#cb5-3"></a>yalefaces_pca <span class="ot">&lt;-</span> <span class="fu">prcomp</span>(yalefaces_x)</span>
<span id="cb5-4"><a href="#cb5-4"></a></span>
<span id="cb5-5"><a href="#cb5-5"></a><span class="fu">str</span>(yalefaces_pca)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>List of 5
 $ sdev    : num [1:165] 10238 6942 5517 5055 4023 ...
 $ rotation: num [1:77760, 1:165] -0.000365 -0.000526 -0.000532 -0.000507 -0.00048 ...
  ..- attr(*, "dimnames")=List of 2
  .. ..$ : chr [1:77760] "V1" "V2" "V3" "V4" ...
  .. ..$ : chr [1:165] "PC1" "PC2" "PC3" "PC4" ...
 $ center  : Named num [1:77760] 123 249 250 249 249 ...
  ..- attr(*, "names")= chr [1:77760] "V1" "V2" "V3" "V4" ...
 $ scale   : logi FALSE
 $ x       : num [1:165, 1:165] -7672 -3314 -3065 -16383 -7397 ...
  ..- attr(*, "dimnames")=List of 2
  .. ..$ : NULL
  .. ..$ : chr [1:165] "PC1" "PC2" "PC3" "PC4" ...
 - attr(*, "class")= chr "prcomp"</code></pre>
</div>
</div>
<ul>
<li><code>prcomp</code> object contains:
<ul>
<li><code>sdev</code> are the standard deviations of the principle components</li>
<li><code>rotation</code> is the loading matrix</li>
<li><code>x</code> is the rotated data (centered + scaled data multiplied by <code>rotation</code> matrix)</li>
<li><code>center</code> is the centering (if any)</li>
<li><code>scale</code> is a logical value to indicate if scaling was done</li>
</ul></li>
</ul>
</section>
<section id="summary-of-pca" class="slide level2">
<h2><i class="fab fa-r-project"></i> Summary of PCA</h2>
<ul>
<li>The summary of <code>prcomp</code> object shows for each PC,
<ul>
<li>it’s standard deviation,</li>
<li>the proportion of variation it explains, and</li>
<li>the cumulative proportion of variation it explains.</li>
</ul></li>
<li>Below shows that PCs of up to (and including) 50 explains 95.11% of the variation in the data.</li>
</ul>
<div class="cell" data-layout-align="center" data-hash="cache/lecture-08.rmarkdown/pca-summary_eeca1f12f559b7a4c8f676ee45221f55">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a><span class="fu">summary</span>(yalefaces_pca)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Importance of components:
                             PC1       PC2       PC3       PC4       PC5
Standard deviation     1.024e+04 6942.0245 5.517e+03 5.055e+03 4.023e+03
Proportion of Variance 3.054e-01    0.1404 8.869e-02 7.444e-02 4.715e-02
Cumulative Proportion  3.054e-01    0.4458 5.345e-01 6.089e-01 6.561e-01
                             PC6       PC7       PC8       PC9      PC10
Standard deviation     3.762e+03 3.081e+03 2.812e+03 2.771e+03 2.523e+03
Proportion of Variance 4.123e-02 2.766e-02 2.304e-02 2.237e-02 1.855e-02
Cumulative Proportion  6.973e-01 7.250e-01 7.480e-01 7.704e-01 7.889e-01
                            PC11      PC12      PC13      PC14      PC15
Standard deviation     2.150e+03 1.998e+03 1.795e+03 1.760e+03 1.731e+03
Proportion of Variance 1.346e-02 1.163e-02 9.390e-03 9.030e-03 8.730e-03
Cumulative Proportion  8.024e-01 8.140e-01 8.234e-01 8.325e-01 8.412e-01
                            PC16      PC17      PC18      PC19      PC20
Standard deviation     1657.4044 1.586e+03 1.502e+03 1.463e+03 1.432e+03
Proportion of Variance    0.0080 7.320e-03 6.570e-03 6.240e-03 5.970e-03
Cumulative Proportion     0.8492 8.565e-01 8.631e-01 8.693e-01 8.753e-01
                            PC21      PC22      PC23      PC24      PC25
Standard deviation     1.343e+03 1.291e+03 1.235e+03 1.205e+03 1.147e+03
Proportion of Variance 5.260e-03 4.850e-03 4.450e-03 4.230e-03 3.840e-03
Cumulative Proportion  8.806e-01 8.854e-01 8.899e-01 8.941e-01 8.979e-01
                            PC26      PC27      PC28      PC29     PC30
Standard deviation     1.144e+03 1.084e+03 1.036e+03 1.018e+03 979.5103
Proportion of Variance 3.810e-03 3.420e-03 3.130e-03 3.020e-03   0.0028
Cumulative Proportion  9.017e-01 9.052e-01 9.083e-01 9.113e-01   0.9141
                            PC31      PC32     PC33      PC34      PC35
Standard deviation     973.46557 949.70604 926.0579 899.08034 886.35745
Proportion of Variance   0.00276   0.00263   0.0025   0.00236   0.00229
Cumulative Proportion    0.91685   0.91948   0.9220   0.92433   0.92662
                            PC36      PC37      PC38      PC39      PC40
Standard deviation     854.35433 819.97982 804.40097 797.11137 781.00509
Proportion of Variance   0.00213   0.00196   0.00189   0.00185   0.00178
Cumulative Proportion    0.92874   0.93070   0.93259   0.93444   0.93622
                            PC41      PC42     PC43      PC44     PC45
Standard deviation     767.79261 753.83380 741.3496 728.30022 717.7012
Proportion of Variance   0.00172   0.00166   0.0016   0.00155   0.0015
Cumulative Proportion    0.93794   0.93959   0.9412   0.94274   0.9442
                            PC46      PC47      PC48      PC49      PC50
Standard deviation     708.79276 695.40095 681.32271 679.49515 666.06781
Proportion of Variance   0.00146   0.00141   0.00135   0.00135   0.00129
Cumulative Proportion    0.94570   0.94711   0.94846   0.94981   0.95110
                            PC51      PC52     PC53      PC54      PC55
Standard deviation     659.25153 650.97034 642.5660 634.40640 624.82484
Proportion of Variance   0.00127   0.00123   0.0012   0.00117   0.00114
Cumulative Proportion    0.95237   0.95360   0.9548   0.95598   0.95712
                            PC56      PC57      PC58      PC59      PC60
Standard deviation     604.43618 602.54879 595.95461 589.03690 584.19071
Proportion of Variance   0.00106   0.00106   0.00103   0.00101   0.00099
Cumulative Proportion    0.95818   0.95924   0.96027   0.96128   0.96228
                            PC61      PC62      PC63      PC64      PC65
Standard deviation     583.05237 565.14296 558.41544 550.93341 546.82381
Proportion of Variance   0.00099   0.00093   0.00091   0.00088   0.00087
Cumulative Proportion    0.96327   0.96420   0.96511   0.96599   0.96686
                            PC66      PC67      PC68     PC69      PC70
Standard deviation     538.43362 532.84440 526.71190 524.7713 515.42757
Proportion of Variance   0.00084   0.00083   0.00081   0.0008   0.00077
Cumulative Proportion    0.96771   0.96854   0.96934   0.9701   0.97092
                            PC71      PC72      PC73      PC74     PC75
Standard deviation     510.56175 508.12438 494.47828 491.91604 489.4362
Proportion of Variance   0.00076   0.00075   0.00071   0.00071   0.0007
Cumulative Proportion    0.97168   0.97243   0.97314   0.97385   0.9746
                            PC76      PC77      PC78      PC79      PC80
Standard deviation     481.77831 474.38456 470.41992 466.23367 456.39436
Proportion of Variance   0.00068   0.00066   0.00064   0.00063   0.00061
Cumulative Proportion    0.97522   0.97588   0.97652   0.97716   0.97776
                           PC81     PC82      PC83      PC84      PC85
Standard deviation     454.5586 453.5185 444.90730 441.53940 435.61013
Proportion of Variance   0.0006   0.0006   0.00058   0.00057   0.00055
Cumulative Proportion    0.9784   0.9790   0.97954   0.98011   0.98066
                            PC86      PC87      PC88     PC89      PC90
Standard deviation     429.57105 426.69337 423.89192 413.2288 411.06527
Proportion of Variance   0.00054   0.00053   0.00052   0.0005   0.00049
Cumulative Proportion    0.98120   0.98173   0.98226   0.9828   0.98324
                            PC91      PC92      PC93      PC94      PC95
Standard deviation     408.23987 403.71341 400.32073 397.67775 394.87635
Proportion of Variance   0.00049   0.00047   0.00047   0.00046   0.00045
Cumulative Proportion    0.98373   0.98421   0.98467   0.98513   0.98559
                            PC96      PC97      PC98      PC99     PC100
Standard deviation     390.69468 389.12213 383.96911 382.15048 376.12550
Proportion of Variance   0.00044   0.00044   0.00043   0.00043   0.00041
Cumulative Proportion    0.98603   0.98647   0.98690   0.98733   0.98774
                          PC101     PC102     PC103     PC104     PC105
Standard deviation     371.2632 365.76624 363.96111 360.61787 355.51007
Proportion of Variance   0.0004   0.00039   0.00039   0.00038   0.00037
Cumulative Proportion    0.9881   0.98853   0.98892   0.98930   0.98967
                           PC106     PC107     PC108     PC109     PC110
Standard deviation     349.66834 347.69259 344.76632 342.22007 336.67809
Proportion of Variance   0.00036   0.00035   0.00035   0.00034   0.00033
Cumulative Proportion    0.99002   0.99037   0.99072   0.99106   0.99139
                           PC111     PC112     PC113     PC114    PC115
Standard deviation     333.36005 331.10318 330.25164 326.73677 322.4559
Proportion of Variance   0.00032   0.00032   0.00032   0.00031   0.0003
Cumulative Proportion    0.99172   0.99203   0.99235   0.99266   0.9930
                          PC116     PC117     PC118     PC119     PC120
Standard deviation     319.0804 317.32550 310.97104 310.16044 306.05539
Proportion of Variance   0.0003   0.00029   0.00028   0.00028   0.00027
Cumulative Proportion    0.9933   0.99356   0.99384   0.99412   0.99439
                           PC121     PC122     PC123     PC124     PC125
Standard deviation     303.24091 299.56704 297.28634 293.09425 286.00109
Proportion of Variance   0.00027   0.00026   0.00026   0.00025   0.00024
Cumulative Proportion    0.99466   0.99492   0.99518   0.99543   0.99567
                           PC126     PC127     PC128     PC129     PC130
Standard deviation     282.01505 280.37829 275.73911 271.80841 268.07858
Proportion of Variance   0.00023   0.00023   0.00022   0.00022   0.00021
Cumulative Proportion    0.99590   0.99613   0.99635   0.99656   0.99677
                          PC131    PC132    PC133     PC134     PC135     PC136
Standard deviation     265.1800 264.0004 259.6532 255.95912 253.99049 250.14523
Proportion of Variance   0.0002   0.0002   0.0002   0.00019   0.00019   0.00018
Cumulative Proportion    0.9970   0.9972   0.9974   0.99757   0.99776   0.99794
                           PC137     PC138     PC139     PC140     PC141
Standard deviation     243.24003 240.62311 236.08174 232.01663 226.44527
Proportion of Variance   0.00017   0.00017   0.00016   0.00016   0.00015
Cumulative Proportion    0.99811   0.99828   0.99844   0.99860   0.99875
                           PC142    PC143     PC144     PC145     PC146
Standard deviation     222.92802 2.16e+02 201.99100 199.59454 193.46553
Proportion of Variance   0.00014 1.40e-04   0.00012   0.00012   0.00011
Cumulative Proportion    0.99889 9.99e-01   0.99915   0.99926   0.99937
                          PC147    PC148     PC149     PC150     PC151
Standard deviation     186.8505 182.9617 179.78968 177.88182 168.71830
Proportion of Variance   0.0001   0.0001   0.00009   0.00009   0.00008
Cumulative Proportion    0.9995   0.9996   0.99967   0.99976   0.99984
                           PC152     PC153    PC154    PC155     PC156
Standard deviation     139.05249 133.45290 95.80808 87.90070 2.527e-11
Proportion of Variance   0.00006   0.00005  0.00003  0.00002 0.000e+00
Cumulative Proportion    0.99990   0.99995  0.99998  1.00000 1.000e+00
                           PC157     PC158     PC159     PC160     PC161
Standard deviation     8.795e-12 6.398e-12 5.481e-12 2.854e-12 1.897e-12
Proportion of Variance 0.000e+00 0.000e+00 0.000e+00 0.000e+00 0.000e+00
Cumulative Proportion  1.000e+00 1.000e+00 1.000e+00 1.000e+00 1.000e+00
                           PC162     PC163     PC164     PC165
Standard deviation     1.095e-12 9.856e-13 7.621e-13 7.621e-13
Proportion of Variance 0.000e+00 0.000e+00 0.000e+00 0.000e+00
Cumulative Proportion  1.000e+00 1.000e+00 1.000e+00 1.000e+00</code></pre>
</div>
</div>
</section>
<section id="summary-of-pca-by-hand" class="slide level2">
<h2><i class="fab fa-r-project"></i> Summary of PCA “by hand”</h2>
<ul>
<li><code>sdev</code> is simply the sample standard deviation of the rotated data:</li>
</ul>
<div class="cell" data-layout-align="center" data-hash="cache/lecture-08.rmarkdown/pca-summary-hand_da6a6f83787ee8433c458d472b5825c6">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a><span class="fu">apply</span>(yalefaces_pca<span class="sc">$</span>x, <span class="dv">2</span>, sd) <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      PC1       PC2       PC3       PC4       PC5       PC6 
10237.892  6942.025  5517.123  5054.695  4022.602  3761.812 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a>yalefaces_pca<span class="sc">$</span>sdev <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 10237.892  6942.025  5517.123  5054.695  4022.602  3761.812</code></pre>
</div>
</div>
<div class="fragment">
<ul>
<li>Proportion of variation explained “by hand”:</li>
</ul>
<div class="cell" data-layout-align="center" data-hash="cache/lecture-08.rmarkdown/unnamed-chunk-2_116bf8cf3bac0cf21205a2dd8a5921cd">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a>(yalefaces_pca<span class="sc">$</span>sdev<span class="sc">^</span><span class="dv">2</span> <span class="sc">/</span> <span class="fu">sum</span>(yalefaces_pca<span class="sc">$</span>sdev<span class="sc">^</span><span class="dv">2</span>)) <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.30539098 0.14041304 0.08868709 0.07444322 0.04714649 0.04123152</code></pre>
</div>
</div>
</div>
<div class="fragment">
<ul>
<li>Cumulative proportion of variation explained “by hand”:</li>
</ul>
<div class="cell" data-layout-align="center" data-hash="cache/lecture-08.rmarkdown/unnamed-chunk-3_7f44a8ff3bbc3deea9aa5a8664060fec">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a><span class="fu">cumsum</span>(yalefaces_pca<span class="sc">$</span>sdev<span class="sc">^</span><span class="dv">2</span> <span class="sc">/</span> <span class="fu">sum</span>(yalefaces_pca<span class="sc">$</span>sdev<span class="sc">^</span><span class="dv">2</span>)) <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.3053910 0.4458040 0.5344911 0.6089343 0.6560808 0.6973123</code></pre>
</div>
</div>
</div>
</section>
<section id="the-total-variation-of-pcs" class="slide level2">
<h2>The total variation of PCs</h2>
<ul>
<li>There are a total of <span class="math inline">\min\{p, n\}</span> PCs.</li>
<li>The total variation of the PCs explain all of the variation of the original variables.</li>
</ul>
<p><span class="math display">\sum_{j = 1}^{\min\{p,~n\}}var(\boldsymbol{t}_j) = \sum_{j=1}^pvar(\boldsymbol{x}_j)</span></p>
<div class="fragment">
<div class="cell" data-layout-align="center" data-hash="cache/lecture-08.rmarkdown/pca_893abb1151d6ffdbc0f3295192f957c0">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1"></a><span class="fu">sum</span>(yalefaces_pca<span class="sc">$</span>sdev<span class="sc">^</span><span class="dv">2</span>) <span class="co"># LHS</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 343213887</code></pre>
</div>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1"></a><span class="fu">sum</span>(<span class="fu">apply</span>(<span class="fu">select</span>(yalefaces, <span class="sc">-</span><span class="fu">c</span>(type, subject)), <span class="dv">2</span>, var)) <span class="co"># RHS</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 343213887</code></pre>
</div>
</div>
</div>
</section>
<section id="image-compression" class="slide level2">
<h2>Image compression</h2>
<div class="cell" data-layout-align="center" data-hash="cache/lecture-08.rmarkdown/yalefaces-pc1calc_643d1823099221ba4771ee339ac59cac">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1"></a>Xnew <span class="ot">&lt;-</span> yalefaces_pca<span class="sc">$</span>x[, <span class="dv">1</span><span class="sc">:</span><span class="dv">50</span>] <span class="sc">%*%</span> <span class="fu">t</span>(yalefaces_pca<span class="sc">$</span>rotation[, <span class="dv">1</span><span class="sc">:</span><span class="dv">50</span>])</span>
<span id="cb21-2"><a href="#cb21-2"></a></span>
<span id="cb21-3"><a href="#cb21-3"></a>sample_ids <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">165</span>, <span class="dv">15</span>)</span>
<span id="cb21-4"><a href="#cb21-4"></a></span>
<span id="cb21-5"><a href="#cb21-5"></a>rawdata <span class="ot">&lt;-</span> <span class="fu">imagedata_to_plotdata</span>(<span class="at">which =</span> sample_ids) </span>
<span id="cb21-6"><a href="#cb21-6"></a>Pdata <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(Xnew) <span class="sc">%&gt;%</span> </span>
<span id="cb21-7"><a href="#cb21-7"></a>  <span class="fu">mutate</span>(<span class="at">type =</span> yalefaces<span class="sc">$</span>type,</span>
<span id="cb21-8"><a href="#cb21-8"></a>         <span class="at">subject =</span> yalefaces<span class="sc">$</span>subject) <span class="sc">%&gt;%</span> </span>
<span id="cb21-9"><a href="#cb21-9"></a>  <span class="fu">imagedata_to_plotdata</span>(<span class="at">which =</span> sample_ids)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="flex">
<div class="w-50 f3">
<div class="cell" data-layout-align="center" data-hash="cache/lecture-08.rmarkdown/yalefaces-raw .pr2_0bf63b919c46916f7ee663cc602d9c64">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/lecture-08.rmarkdown/yalefaces-raw%20.pr2-1.png" width="768"></p>
</figure>
</div>
</div>
</div>
<p>Based on the original data:</p>
<p><span class="math display">165 \times 320 \times 243 \approx 12.8\text{ million}</span></p>
</div>
<div class="w-50 f3">
<div class="cell" data-layout-align="center" data-hash="cache/lecture-08.rmarkdown/yalefaces-pc1 .pl2_5b655c6c792b42bb48eedc3075a56ed3">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/lecture-08.rmarkdown/yalefaces-pc1%20.pl2-1.png" width="768"></p>
</figure>
</div>
</div>
</div>
<p>Based on 50 PCs:</p>
<p><span class="math display">165 \times 50 + 50 \times 320 \times 243 \approx 3.9\text{ million}</span></p>
</div>
</div>
</section>
<section id="facial-recognition" class="slide level2 scrollable">
<h2>Facial recognition</h2>
<p><span class="f4 absolute top-1 right-1" style=""><i class="fas fa-long-arrow-alt-down"></i> scroll</span></p>
<ul>
<li>Each PC captures a different aspect of the data.</li>
<li>The PCs can be treated as a feature downstream, say, for facial recognition systems.</li>
</ul>
<div class="cell" data-layout-align="center" data-hash="cache/lecture-08.rmarkdown/yalefaces-pccalc_3b029f4f23cd8697a4e38c5ad35f1ee0">

</div>
<div class="flex">
<div class="w-50">
<div class="cell" data-layout-align="center" data-hash="cache/lecture-08.rmarkdown/yalefaces-pc-even_8eba7d72692b82f9d463e631bc19607c">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/lecture-08.rmarkdown/yalefaces-pc-even-1.png" width="768"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/lecture-08.rmarkdown/yalefaces-pc-even-2.png" width="768"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/lecture-08.rmarkdown/yalefaces-pc-even-3.png" width="768"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/lecture-08.rmarkdown/yalefaces-pc-even-4.png" width="768"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/lecture-08.rmarkdown/yalefaces-pc-even-5.png" width="768"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/lecture-08.rmarkdown/yalefaces-pc-even-6.png" width="768"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/lecture-08.rmarkdown/yalefaces-pc-even-7.png" width="768"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/lecture-08.rmarkdown/yalefaces-pc-even-8.png" width="768"></p>
</figure>
</div>
</div>
</div>
</div>
<div class="w-50">
<div class="cell" data-layout-align="center" data-hash="cache/lecture-08.rmarkdown/yalefaces-pc-odd_2ae75313827ee1a2e54610755bf266b9">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/lecture-08.rmarkdown/yalefaces-pc-odd-1.png" width="768"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/lecture-08.rmarkdown/yalefaces-pc-odd-2.png" width="768"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/lecture-08.rmarkdown/yalefaces-pc-odd-3.png" width="768"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/lecture-08.rmarkdown/yalefaces-pc-odd-4.png" width="768"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/lecture-08.rmarkdown/yalefaces-pc-odd-5.png" width="768"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/lecture-08.rmarkdown/yalefaces-pc-odd-6.png" width="768"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/lecture-08.rmarkdown/yalefaces-pc-odd-7.png" width="768"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/lecture-08.rmarkdown/yalefaces-pc-odd-8.png" width="768"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</section></section>
<section>
<section id="an-application-to-wine-quality-data" class="title-slide slide level1 mcenter center" data-background-color="#006DAE">
<h1>An application to wine quality data</h1>

</section>
<section id="wine-quality-data" class="slide level2 scrollable">
<h2><i class="fas fa-database"></i> Wine quality data</h2>
<p><span class="f4 absolute top-1 right-1" style=""><i class="fas fa-long-arrow-alt-down"></i> scroll</span></p>
<p>This data on wine quality found <a href="https://www.kaggle.com/datasets/rajyellow46/wine-quality">here</a>.</p>
<div class="cell skimr" data-layout-align="center" data-hash="cache/lecture-08.rmarkdown/skim-wine_63c9bfefe84b38c1289c7e9519238968">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1"></a>wine <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"https://emitanaka.org/iml/data/winequalityN.csv"</span>)</span>
<span id="cb22-2"><a href="#cb22-2"></a>skimr<span class="sc">::</span><span class="fu">skim</span>(wine)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table>
<caption>Data summary</caption>
<tbody>
<tr class="odd">
<td style="text-align: left;">Name</td>
<td style="text-align: left;">wine</td>
</tr>
<tr class="even">
<td style="text-align: left;">Number of rows</td>
<td style="text-align: left;">6497</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Number of columns</td>
<td style="text-align: left;">13</td>
</tr>
<tr class="even">
<td style="text-align: left;">_______________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Column type frequency:</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">character</td>
<td style="text-align: left;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">numeric</td>
<td style="text-align: left;">12</td>
</tr>
<tr class="even">
<td style="text-align: left;">________________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Group variables</td>
<td style="text-align: left;">None</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: character</strong></p>
<table>
<colgroup>
<col style="width: 19%">
<col style="width: 13%">
<col style="width: 19%">
<col style="width: 5%">
<col style="width: 5%">
<col style="width: 8%">
<col style="width: 12%">
<col style="width: 15%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: right;">n_missing</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: right;">min</th>
<th style="text-align: right;">max</th>
<th style="text-align: right;">empty</th>
<th style="text-align: right;">n_unique</th>
<th style="text-align: right;">whitespace</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">type</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">0</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: numeric</strong></p>
<table style="width:100%;">
<colgroup>
<col style="width: 21%">
<col style="width: 10%">
<col style="width: 14%">
<col style="width: 7%">
<col style="width: 6%">
<col style="width: 5%">
<col style="width: 6%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 6%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: right;">n_missing</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: right;">mean</th>
<th style="text-align: right;">sd</th>
<th style="text-align: right;">p0</th>
<th style="text-align: right;">p25</th>
<th style="text-align: right;">p50</th>
<th style="text-align: right;">p75</th>
<th style="text-align: right;">p100</th>
<th style="text-align: left;">hist</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">fixed acidity</td>
<td style="text-align: right;">10</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">7.22</td>
<td style="text-align: right;">1.30</td>
<td style="text-align: right;">3.80</td>
<td style="text-align: right;">6.40</td>
<td style="text-align: right;">7.00</td>
<td style="text-align: right;">7.70</td>
<td style="text-align: right;">15.90</td>
<td style="text-align: left;">▂▇▁▁▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">volatile acidity</td>
<td style="text-align: right;">8</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0.34</td>
<td style="text-align: right;">0.16</td>
<td style="text-align: right;">0.08</td>
<td style="text-align: right;">0.23</td>
<td style="text-align: right;">0.29</td>
<td style="text-align: right;">0.40</td>
<td style="text-align: right;">1.58</td>
<td style="text-align: left;">▇▂▁▁▁</td>
</tr>
<tr class="odd">
<td style="text-align: left;">citric acid</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0.32</td>
<td style="text-align: right;">0.15</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0.25</td>
<td style="text-align: right;">0.31</td>
<td style="text-align: right;">0.39</td>
<td style="text-align: right;">1.66</td>
<td style="text-align: left;">▇▅▁▁▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">residual sugar</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">5.44</td>
<td style="text-align: right;">4.76</td>
<td style="text-align: right;">0.60</td>
<td style="text-align: right;">1.80</td>
<td style="text-align: right;">3.00</td>
<td style="text-align: right;">8.10</td>
<td style="text-align: right;">65.80</td>
<td style="text-align: left;">▇▁▁▁▁</td>
</tr>
<tr class="odd">
<td style="text-align: left;">chlorides</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0.06</td>
<td style="text-align: right;">0.04</td>
<td style="text-align: right;">0.01</td>
<td style="text-align: right;">0.04</td>
<td style="text-align: right;">0.05</td>
<td style="text-align: right;">0.06</td>
<td style="text-align: right;">0.61</td>
<td style="text-align: left;">▇▁▁▁▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">free sulfur dioxide</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">30.53</td>
<td style="text-align: right;">17.75</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">17.00</td>
<td style="text-align: right;">29.00</td>
<td style="text-align: right;">41.00</td>
<td style="text-align: right;">289.00</td>
<td style="text-align: left;">▇▁▁▁▁</td>
</tr>
<tr class="odd">
<td style="text-align: left;">total sulfur dioxide</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">115.74</td>
<td style="text-align: right;">56.52</td>
<td style="text-align: right;">6.00</td>
<td style="text-align: right;">77.00</td>
<td style="text-align: right;">118.00</td>
<td style="text-align: right;">156.00</td>
<td style="text-align: right;">440.00</td>
<td style="text-align: left;">▅▇▂▁▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">density</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0.99</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0.99</td>
<td style="text-align: right;">0.99</td>
<td style="text-align: right;">0.99</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">1.04</td>
<td style="text-align: left;">▇▂▁▁▁</td>
</tr>
<tr class="odd">
<td style="text-align: left;">pH</td>
<td style="text-align: right;">9</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">3.22</td>
<td style="text-align: right;">0.16</td>
<td style="text-align: right;">2.72</td>
<td style="text-align: right;">3.11</td>
<td style="text-align: right;">3.21</td>
<td style="text-align: right;">3.32</td>
<td style="text-align: right;">4.01</td>
<td style="text-align: left;">▁▇▆▁▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">sulphates</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0.53</td>
<td style="text-align: right;">0.15</td>
<td style="text-align: right;">0.22</td>
<td style="text-align: right;">0.43</td>
<td style="text-align: right;">0.51</td>
<td style="text-align: right;">0.60</td>
<td style="text-align: right;">2.00</td>
<td style="text-align: left;">▇▃▁▁▁</td>
</tr>
<tr class="odd">
<td style="text-align: left;">alcohol</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">10.49</td>
<td style="text-align: right;">1.19</td>
<td style="text-align: right;">8.00</td>
<td style="text-align: right;">9.50</td>
<td style="text-align: right;">10.30</td>
<td style="text-align: right;">11.30</td>
<td style="text-align: right;">14.90</td>
<td style="text-align: left;">▃▇▅▂▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">quality</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">5.82</td>
<td style="text-align: right;">0.87</td>
<td style="text-align: right;">3.00</td>
<td style="text-align: right;">5.00</td>
<td style="text-align: right;">6.00</td>
<td style="text-align: right;">6.00</td>
<td style="text-align: right;">9.00</td>
<td style="text-align: left;">▁▆▇▃▁</td>
</tr>
</tbody>
</table>
</div>
</div>
<ul>
<li>There are small amount missing values in the data.</li>
<li>For ease of computation, let’s ignore any observations with missing values (<i class="fas fa-exclamation-circle"></i> don’t do this in practice!)</li>
</ul>
<div class="cell" data-layout-align="center" data-hash="cache/lecture-08.rmarkdown/winec_0f67191add396553f65071c8004e09b6">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1"></a>winec <span class="ot">&lt;-</span> wine <span class="sc">%&gt;%</span> </span>
<span id="cb23-2"><a href="#cb23-2"></a>  <span class="fu">filter</span>(<span class="fu">if_all</span>(<span class="fu">everything</span>(), complete.cases))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="scaling-then-pca" class="slide level2">
<h2><i class="fab fa-r-project"></i> Scaling then PCA</h2>
<div class="cell" data-layout-align="center" data-hash="cache/lecture-08.rmarkdown/pc1_38ed8c17343b002c7ac9421a8c3a8b5d">
<div class="sourceCode cell-code" id="cb24" data-code-line-numbers="3-4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1"></a>wine_pca <span class="ot">&lt;-</span> winec <span class="sc">%&gt;%</span></span>
<span id="cb24-2"><a href="#cb24-2"></a>  <span class="fu">select</span>(<span class="sc">-</span>type) <span class="sc">%&gt;%</span> </span>
<span id="cb24-3"><a href="#cb24-3"></a>  <span class="fu">scale</span>() <span class="sc">%&gt;%</span></span>
<span id="cb24-4"><a href="#cb24-4"></a>  <span class="fu">prcomp</span>() <span class="co"># or skip above line and use prcomp(.scale = TRUE) </span></span>
<span id="cb24-5"><a href="#cb24-5"></a></span>
<span id="cb24-6"><a href="#cb24-6"></a>wine_pca</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Standard deviations (1, .., p=12):
 [1] 1.7445303 1.6276285 1.2809541 1.0337025 0.9172812 0.8133844 0.7505644
 [8] 0.7178551 0.6768948 0.5460465 0.4767787 0.1808925

Rotation (n x k) = (12 x 12):
                             PC1        PC2         PC3         PC4
fixed acidity         0.26071445 -0.2589454  0.46564247 -0.14566848
volatile acidity      0.39565721 -0.1017451 -0.28077847 -0.07972791
citric acid          -0.14371362 -0.1458295  0.58854048  0.05320974
residual sugar       -0.31632548 -0.3455107 -0.07365003  0.11416835
chlorides             0.31574995 -0.2668505  0.04612386  0.16409739
free sulfur dioxide  -0.42198110 -0.1158082 -0.09751916  0.30117025
total sulfur dioxide -0.47318123 -0.1486730 -0.10010043  0.13109780
density               0.09751989 -0.5540261 -0.05065537  0.15110768
pH                    0.20549880  0.1541321 -0.40589466  0.47551131
sulphates             0.30062120 -0.1172996  0.17132282  0.58618450
alcohol               0.05400002  0.4937868  0.21317892  0.08009431
quality              -0.08984644  0.2948571  0.29793560  0.47198353
                              PC5         PC6         PC7          PC8
fixed acidity         0.164412120 -0.03309162  0.39667040 -0.001027375
volatile acidity      0.147587298  0.37665137  0.44898061  0.308979027
citric acid          -0.237540038 -0.36465719  0.04508088  0.442396627
residual sugar        0.507179210  0.06151257 -0.09591307  0.085514113
chlorides            -0.391063164  0.42844719 -0.47017478  0.381450232
free sulfur dioxide  -0.249063830  0.28146210  0.36627137  0.117939741
total sulfur dioxide -0.224891074  0.10673778  0.23527950  0.011180004
density               0.329530808 -0.15600804  0.01445317  0.041722486
pH                   -0.005058406 -0.56226140  0.07866747  0.357336224
sulphates            -0.195771884  0.02503005  0.16520174 -0.592620308
alcohol               0.113678532  0.16527545  0.33900469  0.229085262
quality               0.460571232  0.27871185 -0.26579816  0.094104102
                               PC9        PC10         PC11          PC12
fixed acidity        -0.4227271729 -0.27139305 -0.276874322  0.3353301943
volatile acidity      0.1286615123  0.49373092  0.141703097  0.0825018577
citric acid           0.2449077627  0.33018866  0.229600749 -0.0009598704
residual sugar        0.4871245444 -0.20979285  0.005346906  0.4508251507
chlorides             0.0376187194 -0.23817399 -0.192321793  0.0429155594
free sulfur dioxide  -0.3016225196 -0.30098557  0.487257740  0.0003688274
total sulfur dioxide  0.0003816077  0.29483629 -0.719957849 -0.0638032923
density              -0.0709357647 -0.07631692 -0.003674224 -0.7158191738
pH                   -0.1383458051 -0.11053296 -0.138041136  0.2066358341
sulphates             0.3008084133  0.08242215  0.046234352  0.0777407388
alcohol               0.4159274104 -0.41728072 -0.190397862 -0.3322424355
quality              -0.3569784359  0.31037393 -0.017630927 -0.0081246049</code></pre>
</div>
</div>
</section>
<section id="standardise-or-not" class="slide level2">
<h2>Standardise or not?</h2>
<div>
<ul>
<li class="fragment">We can scale in two ways
<ul>
<li class="fragment">Scale the data using <code>scale()</code></li>
<li class="fragment">Include the option <code>scale. = TRUE</code> when calling <code>prcomp()</code></li>
</ul></li>
<li class="fragment">While the normalisation <span class="math inline">\sum_{j=1}^{\min\{p,n\}}w_{jk}^2 = 1</span> is always implemented in any software that does PCA, the decision to <em>standardise</em> is up to you.</li>
<li class="fragment">If the variables are measured in the <em>same</em> units then there may be no need to standardise.</li>
<li class="fragment">If the variables are measured in the <em>different</em> units then <em>standardise</em> the data.</li>
</ul>
</div>
</section>
<section id="proportion-of-variance-by-pcs" class="slide level2">
<h2><i class="fab fa-r-project"></i> Proportion of variance by PCs</h2>
<div class="cell" data-layout-align="center" data-hash="cache/lecture-08.rmarkdown/summary_575c00a72a383ccaaccaa7708254732d">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1"></a><span class="fu">summary</span>(wine_pca)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Importance of components:
                          PC1    PC2    PC3     PC4     PC5     PC6     PC7
Standard deviation     1.7445 1.6276 1.2810 1.03370 0.91728 0.81338 0.75056
Proportion of Variance 0.2536 0.2208 0.1367 0.08905 0.07012 0.05513 0.04695
Cumulative Proportion  0.2536 0.4744 0.6111 0.70016 0.77028 0.82541 0.87236
                           PC8     PC9    PC10    PC11    PC12
Standard deviation     0.71786 0.67689 0.54605 0.47678 0.18089
Proportion of Variance 0.04294 0.03818 0.02485 0.01894 0.00273
Cumulative Proportion  0.91530 0.95348 0.97833 0.99727 1.00000</code></pre>
</div>
</div>
</section>
<section id="loading-matrix" class="slide level2">
<h2><i class="fab fa-r-project"></i> Loading matrix</h2>
<div class="cell" data-layout-align="center" data-hash="cache/lecture-08.rmarkdown/weights_893e3a81b580b764465153a50cf3ed27">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1"></a>wine_pca<span class="sc">$</span>rotation</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                             PC1        PC2         PC3         PC4
fixed acidity         0.26071445 -0.2589454  0.46564247 -0.14566848
volatile acidity      0.39565721 -0.1017451 -0.28077847 -0.07972791
citric acid          -0.14371362 -0.1458295  0.58854048  0.05320974
residual sugar       -0.31632548 -0.3455107 -0.07365003  0.11416835
chlorides             0.31574995 -0.2668505  0.04612386  0.16409739
free sulfur dioxide  -0.42198110 -0.1158082 -0.09751916  0.30117025
total sulfur dioxide -0.47318123 -0.1486730 -0.10010043  0.13109780
density               0.09751989 -0.5540261 -0.05065537  0.15110768
pH                    0.20549880  0.1541321 -0.40589466  0.47551131
sulphates             0.30062120 -0.1172996  0.17132282  0.58618450
alcohol               0.05400002  0.4937868  0.21317892  0.08009431
quality              -0.08984644  0.2948571  0.29793560  0.47198353
                              PC5         PC6         PC7          PC8
fixed acidity         0.164412120 -0.03309162  0.39667040 -0.001027375
volatile acidity      0.147587298  0.37665137  0.44898061  0.308979027
citric acid          -0.237540038 -0.36465719  0.04508088  0.442396627
residual sugar        0.507179210  0.06151257 -0.09591307  0.085514113
chlorides            -0.391063164  0.42844719 -0.47017478  0.381450232
free sulfur dioxide  -0.249063830  0.28146210  0.36627137  0.117939741
total sulfur dioxide -0.224891074  0.10673778  0.23527950  0.011180004
density               0.329530808 -0.15600804  0.01445317  0.041722486
pH                   -0.005058406 -0.56226140  0.07866747  0.357336224
sulphates            -0.195771884  0.02503005  0.16520174 -0.592620308
alcohol               0.113678532  0.16527545  0.33900469  0.229085262
quality               0.460571232  0.27871185 -0.26579816  0.094104102
                               PC9        PC10         PC11          PC12
fixed acidity        -0.4227271729 -0.27139305 -0.276874322  0.3353301943
volatile acidity      0.1286615123  0.49373092  0.141703097  0.0825018577
citric acid           0.2449077627  0.33018866  0.229600749 -0.0009598704
residual sugar        0.4871245444 -0.20979285  0.005346906  0.4508251507
chlorides             0.0376187194 -0.23817399 -0.192321793  0.0429155594
free sulfur dioxide  -0.3016225196 -0.30098557  0.487257740  0.0003688274
total sulfur dioxide  0.0003816077  0.29483629 -0.719957849 -0.0638032923
density              -0.0709357647 -0.07631692 -0.003674224 -0.7158191738
pH                   -0.1383458051 -0.11053296 -0.138041136  0.2066358341
sulphates             0.3008084133  0.08242215  0.046234352  0.0777407388
alcohol               0.4159274104 -0.41728072 -0.190397862 -0.3322424355
quality              -0.3569784359  0.31037393 -0.017630927 -0.0081246049</code></pre>
</div>
</div>
<ul>
<li>A positive (negative) loading indicates a positive (negative) association between a variable and the corresponding PC.</li>
<li>The magnitude indicates the strength of the association.</li>
</ul>
</section>
<section id="augment-pcs-to-data" class="slide level2">
<h2><i class="fab fa-r-project"></i> Augment PCs to data</h2>
<div class="cell" data-layout-align="center" data-hash="cache/lecture-08.rmarkdown/augment_0a9bdcaf59593febcd3d2f4ddf5cd378">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1"></a>wine_pca_aug <span class="ot">&lt;-</span> wine_pca <span class="sc">%&gt;%</span> </span>
<span id="cb30-2"><a href="#cb30-2"></a>  broom<span class="sc">::</span><span class="fu">augment</span>(winec)</span>
<span id="cb30-3"><a href="#cb30-3"></a></span>
<span id="cb30-4"><a href="#cb30-4"></a><span class="fu">head</span>(wine_pca_aug)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 26
  .rownames type  `fixed acidity` `volatile acidity` `citric acid`
  &lt;chr&gt;     &lt;chr&gt;           &lt;dbl&gt;              &lt;dbl&gt;         &lt;dbl&gt;
1 1         white             7                 0.27          0.36
2 2         white             6.3               0.3           0.34
3 3         white             8.1               0.28          0.4 
4 4         white             7.2               0.23          0.32
5 5         white             7.2               0.23          0.32
6 6         white             8.1               0.28          0.4 
# ℹ 21 more variables: `residual sugar` &lt;dbl&gt;, chlorides &lt;dbl&gt;,
#   `free sulfur dioxide` &lt;dbl&gt;, `total sulfur dioxide` &lt;dbl&gt;, density &lt;dbl&gt;,
#   pH &lt;dbl&gt;, sulphates &lt;dbl&gt;, alcohol &lt;dbl&gt;, quality &lt;dbl&gt;, .fittedPC1 &lt;dbl&gt;,
#   .fittedPC2 &lt;dbl&gt;, .fittedPC3 &lt;dbl&gt;, .fittedPC4 &lt;dbl&gt;, .fittedPC5 &lt;dbl&gt;,
#   .fittedPC6 &lt;dbl&gt;, .fittedPC7 &lt;dbl&gt;, .fittedPC8 &lt;dbl&gt;, .fittedPC9 &lt;dbl&gt;,
#   .fittedPC10 &lt;dbl&gt;, .fittedPC11 &lt;dbl&gt;, .fittedPC12 &lt;dbl&gt;</code></pre>
</div>
</div>
</section></section>
<section>
<section id="visualisations" class="title-slide slide level1 mcenter center" data-background-color="#006DAE">
<h1><i class="fas fa-chart-line"></i> Visualisations</h1>

</section>
<section id="correlation-biplot" class="slide level2">
<h2><i class="fab fa-r-project"></i> Correlation biplot</h2>
<div class="cell" data-layout-align="center" data-hash="cache/lecture-08.rmarkdown/pc-biplot_db55c7a70ef8181695634c1652513db1">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1"></a><span class="fu">library</span>(ggfortify)</span>
<span id="cb32-2"><a href="#cb32-2"></a><span class="fu">autoplot</span>(wine_pca, <span class="at">loadings =</span> <span class="cn">TRUE</span>, <span class="at">loadings.label =</span> <span class="cn">TRUE</span>, <span class="at">loadings.label.colour =</span> <span class="st">"black"</span>,</span>
<span id="cb32-3"><a href="#cb32-3"></a>         <span class="at">data =</span> winec, <span class="at">colour =</span> <span class="st">'type'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/lecture-08.rmarkdown/pc-biplot-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="distance-biplot" class="slide level2">
<h2><i class="fab fa-r-project"></i> Distance biplot</h2>
<div class="cell" data-layout-align="center" data-hash="cache/lecture-08.rmarkdown/pc-biplot-dist_5310d0b17957e5b10b5a5a5f050210c3">
<div class="sourceCode cell-code" id="cb33" data-code-line-numbers="4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1"></a><span class="fu">library</span>(ggfortify)</span>
<span id="cb33-2"><a href="#cb33-2"></a><span class="fu">autoplot</span>(wine_pca, <span class="at">loadings =</span> <span class="cn">TRUE</span>, <span class="at">loadings.label =</span> <span class="cn">TRUE</span>, <span class="at">loadings.label.colour =</span> <span class="st">"black"</span>,</span>
<span id="cb33-3"><a href="#cb33-3"></a>         <span class="at">data =</span> winec, <span class="at">colour =</span> <span class="st">'type'</span>,</span>
<span id="cb33-4"><a href="#cb33-4"></a>         <span class="at">scale =</span> <span class="dv">0</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/lecture-08.rmarkdown/pc-biplot-dist-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="interpreting-a-biplot" class="slide level2">
<h2>Interpreting a biplot</h2>
<ul>
<li>The distance between observations implies similarity between observations.</li>
<li>The angles between variables tell us something about correlation (approximately)
<ul>
<li>citric acid and residual sugar are highly positively correlated as the angle between them is close to zero.</li>
<li>quality and pH are close to uncorrelated as the angle between them is close 90 degrees.</li>
<li>pH and citric acid are highly negatively correlated as the angle between them is close to 180 degrees.</li>
</ul></li>
</ul>
</section>
<section id="scree-plot" class="slide level2">
<h2>Scree plot</h2>
<div class="cell" data-layout-align="center" data-hash="cache/lecture-08.rmarkdown/pca-varex_2992b8ca0e51bc6eb04276481c15b200">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1"></a>pcsum <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">vars =</span> wine_pca<span class="sc">$</span>sdev<span class="sc">^</span><span class="dv">2</span>,</span>
<span id="cb34-2"><a href="#cb34-2"></a>                <span class="at">PC =</span> <span class="fu">factor</span>(<span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(wine_pca<span class="sc">$</span>sdev))) </span>
<span id="cb34-3"><a href="#cb34-3"></a></span>
<span id="cb34-4"><a href="#cb34-4"></a>pcsum <span class="sc">%&gt;%</span> </span>
<span id="cb34-5"><a href="#cb34-5"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(PC, vars)) <span class="sc">+</span></span>
<span id="cb34-6"><a href="#cb34-6"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb34-7"><a href="#cb34-7"></a>  <span class="fu">geom_line</span>(<span class="at">group =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb34-8"><a href="#cb34-8"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">"Variance"</span>, <span class="at">title =</span> <span class="st">"Screeplot"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/lecture-08.rmarkdown/pca-varex-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
</section></section>
<section>
<section id="selecting-the-number-of-principal-components" class="title-slide slide level1 mcenter center" data-background-color="#006DAE">
<h1>Selecting the number of principal components</h1>

</section>
<section id="elbow-method" class="slide level2">
<h2>Elbow method</h2>
<ul>
<li>The scree plot can be used to select the number of PCs.</li>
<li>Look for the “elbow” of the scree plot (around 4-6).</li>
<li>There is some subjectiveness to the selection!</li>
</ul>
<div class="cell" data-layout-align="center" data-hash="cache/lecture-08.rmarkdown/pca-varex2_3ffc23e25345763b7b6e048f66990e32">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/lecture-08.rmarkdown/pca-varex2-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="kaisers-rule" class="slide level2">
<h2>Kaiser’s rule</h2>
<ul>
<li>Kaiser’s rule states to select all PCs with a variance greater than 1.</li>
</ul>
<div class="cell" data-layout-align="center" data-hash="cache/lecture-08.rmarkdown/unnamed-chunk-4_38cb35d8c1f1fd3113244dc28d83aae2">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1"></a><span class="fu">summary</span>(wine_pca)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Importance of components:
                          PC1    PC2    PC3     PC4     PC5     PC6     PC7
Standard deviation     1.7445 1.6276 1.2810 1.03370 0.91728 0.81338 0.75056
Proportion of Variance 0.2536 0.2208 0.1367 0.08905 0.07012 0.05513 0.04695
Cumulative Proportion  0.2536 0.4744 0.6111 0.70016 0.77028 0.82541 0.87236
                           PC8     PC9    PC10    PC11    PC12
Standard deviation     0.71786 0.67689 0.54605 0.47678 0.18089
Proportion of Variance 0.04294 0.03818 0.02485 0.01894 0.00273
Cumulative Proportion  0.91530 0.95348 0.97833 0.99727 1.00000</code></pre>
</div>
</div>
<ul>
<li>Here we select 4 PCs.</li>
</ul>
</section>
<section id="interpreting-pcs" class="slide level2">
<h2>Interpreting PCs</h2>
<div>
<ul>
<li class="fragment">Remember that PCs do nothing more than finding uncorrelated linear combinations of the variables that explain the variance of the data.</li>
<li class="fragment">It can be incredibly useful to find the interpretation of PCs but this relies on the context of data.</li>
</ul>
</div>
</section></section>
<section>
<section id="multi-dimensional-scaling" class="title-slide slide level1 mcenter center" data-background-color="#006DAE">
<h1>Multi-dimensional scaling</h1>

</section>
<section id="motivation" class="slide level2">
<h2>Motivation</h2>
<div>
<ul>
<li class="fragment">Suppose we have <span class="math inline">n</span> observations and <span class="math inline">p</span> (numerical) variables.</li>
<li class="fragment">When <span class="math inline">p = 2</span>, we can easily draw a scatterplot to see the disances between observations.<br>
</li>
<li class="fragment">However, when <span class="math inline">p &gt; 2</span> then there isn’t an easy way to visualise the distances between observations.</li>
<li class="fragment">But, we can get a close approximation of the distances using <strong>multi-dimensional scaling</strong> (MDS) by finding a low (usually two) dimensional represenation of pairwise distances between observations.</li>
</ul>
</div>
</section>
<section id="classical-mds" class="slide level2">
<h2>Classical MDS</h2>
<div class="cell" data-layout-align="center" data-hash="cache/lecture-08.rmarkdown/mds-wine_97a9a624c4105eac60857b1f08a8f14d">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1"></a>Dwinec <span class="ot">&lt;-</span> winec <span class="sc">%&gt;%</span> </span>
<span id="cb37-2"><a href="#cb37-2"></a>  <span class="co"># note that we are removing the categorical variable `type` here!</span></span>
<span id="cb37-3"><a href="#cb37-3"></a>  <span class="fu">select</span>(<span class="sc">-</span>type) <span class="sc">%&gt;%</span> </span>
<span id="cb37-4"><a href="#cb37-4"></a>  <span class="co"># then standardising the data</span></span>
<span id="cb37-5"><a href="#cb37-5"></a>  <span class="fu">scale</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb37-6"><a href="#cb37-6"></a>  <span class="co"># and calculating the distances between observations (ED is default)</span></span>
<span id="cb37-7"><a href="#cb37-7"></a>  <span class="fu">dist</span>()</span>
<span id="cb37-8"><a href="#cb37-8"></a></span>
<span id="cb37-9"><a href="#cb37-9"></a><span class="co"># add the row labels back</span></span>
<span id="cb37-10"><a href="#cb37-10"></a><span class="fu">attributes</span>(Dwinec)<span class="sc">$</span>Labels <span class="ot">&lt;-</span> winec<span class="sc">$</span>type</span>
<span id="cb37-11"><a href="#cb37-11"></a></span>
<span id="cb37-12"><a href="#cb37-12"></a><span class="co"># perform the classical (metric) MDS</span></span>
<span id="cb37-13"><a href="#cb37-13"></a>mdsout <span class="ot">&lt;-</span> <span class="fu">cmdscale</span>(Dwinec, <span class="at">k =</span> <span class="dv">2</span>)</span>
<span id="cb37-14"><a href="#cb37-14"></a></span>
<span id="cb37-15"><a href="#cb37-15"></a><span class="fu">head</span>(mdsout)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>             [,1]       [,2]
white  2.49817594  3.1644222
white -0.08269114 -0.4738874
white  0.18302503  0.2916830
white  1.75126084  0.7336440
white  1.75126084  0.7336440
white  0.18302503  0.2916830</code></pre>
</div>
</div>
</section>
<section id="visualising-the-mds-output" class="slide level2">
<h2>Visualising the MDS output</h2>
<div class="cell" data-layout-align="center" data-hash="cache/lecture-08.rmarkdown/unnamed-chunk-5_5ba47f787715091637a2a31a64fa7aaa">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1"></a>mdsout <span class="sc">%&gt;%</span> </span>
<span id="cb39-2"><a href="#cb39-2"></a>  <span class="fu">as_tibble</span>(<span class="at">rownames =</span> <span class="st">"type"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb39-3"><a href="#cb39-3"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(V1, V2)) <span class="sc">+</span></span>
<span id="cb39-4"><a href="#cb39-4"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> type))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/lecture-08.rmarkdown/unnamed-chunk-5-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="distances" class="slide level2">
<h2>Distances</h2>
<p><span class="math display">D_{Euclidean}(\boldsymbol{x}_i, \boldsymbol{x}_j) = \sqrt{\sum_{s = 1}^p (x_{is} - x_{js})^2}.</span></p>
<div>
<ul>
<li class="fragment">So for example, <span class="math inline">D_{Euclidean}(\boldsymbol{x}_1, \boldsymbol{x}_2) = 5.415</span>.</li>
<li class="fragment">But for <span class="math inline">D_{Euclidean}(\boldsymbol{z}_1, \boldsymbol{z}_2) = \sqrt{(2.498 - (-0.083))^2 + (3.164 - (-0.474))^2} = 4.461.</span></li>
<li class="fragment">Another example, <span class="math inline">D_{Euclidean}(\boldsymbol{x}_1, \boldsymbol{x}_3) = 4.392</span>.</li>
<li class="fragment">But <span class="math inline">D_{Euclidean}(\boldsymbol{z}_1, \boldsymbol{z}_2) = \sqrt{(2.498 - 0.183)^2 + (3.164 - 0.292)^2} = 3.69.</span></li>
</ul>
</div>
</section>
<section id="comparing-raw-and-mds-distances" class="slide level2">
<h2>Comparing raw and MDS distances</h2>
<div class="cell" data-layout-align="center" data-hash="cache/lecture-08.rmarkdown/mds-vs-raw_b1e709c87482b4be290ecfaffff90706">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1"></a><span class="fu">tibble</span>(<span class="at">ed_mds =</span> <span class="fu">as.vector</span>(<span class="fu">dist</span>(mdsout)),</span>
<span id="cb40-2"><a href="#cb40-2"></a>       <span class="at">ed_raw =</span> <span class="fu">as.vector</span>(Dwinec)) <span class="sc">%&gt;%</span> </span>
<span id="cb40-3"><a href="#cb40-3"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(ed_mds, ed_raw)) <span class="sc">+</span></span>
<span id="cb40-4"><a href="#cb40-4"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb40-5"><a href="#cb40-5"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"MDS (ED)"</span>, <span class="at">y =</span> <span class="st">"Raw (ED)"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/lecture-08.rmarkdown/mds-vs-raw-1.png" width="480"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="classical-mds-1" class="slide level2">
<h2>Classical MDS</h2>
<ul>
<li>In classical MDS, the aim is to minimise the strain function:</li>
</ul>
<p><span class="math display">\text{Strain} = \sum_{i=1}^{n-1}\sum_{j&gt;i}\left(D(\boldsymbol{x}_i, \boldsymbol{x}_j) - D(\boldsymbol{z}_i, \boldsymbol{z}_j)\right)^2.</span></p>
<ul>
<li>The above has a tractable solution when Euclidean distance is used.</li>
<li>The solution <em>rotates</em> the points until the 2D projection is close to the input distances.</li>
</ul>
</section>
<section id="sammon-mapping" class="slide level2">
<h2>Sammon mapping</h2>
<ul>
<li>An alternative objective is to minimise the stress function:</li>
</ul>
<p><span class="math display">\text{Stress} = \sum_{i=1}^{n-1}\sum_{j&gt;i}\frac{\left(D(\boldsymbol{x}_i, \boldsymbol{x}_j) - D(\boldsymbol{z}_i, \boldsymbol{z}_j)\right)^2}{D(\boldsymbol{x}_i, \boldsymbol{x}_j)}.</span></p>
<ul>
<li>This ensures that points that observations with small distances are close to in the MDS output as well, preserving the local structure.</li>
<li>This is refererd to as <strong>sammon mapping</strong>.</li>
</ul>
</section>
<section id="modern-mds" class="slide level2">
<h2>Modern MDS</h2>
<div>
<ul>
<li class="fragment">Methods for finding a low dimensional representation of high dimensional data are more recently referred to as <strong>manifold learning</strong>.</li>
<li class="fragment">Low-dimensional representations can also be used as features downstream in classification or regression problems.</li>
<li class="fragment">Some of these examples include,
<ul>
<li class="fragment">Local linear embeddings (LLE)</li>
<li class="fragment">IsoMap</li>
<li class="fragment">t-SNE</li>
<li class="fragment">UMAP, and so on.</li>
</ul></li>
</ul>
</div>
</section></section>
<section id="takeaways" class="title-slide slide level1 center" data-background-color="#006DAE">
<h1><i class="fas fa-key"></i> Takeaways</h1>
<ul>
<li>Principal components are linear combination of the data variables.</li>
<li>Multi-dimensional scaling is a non-linear dimensionality reduction.</li>
<li>They both present low-dimenstional representation of the full data and useful for downstream analysis.</li>
</ul>
<p><img src="images/monash-one-line-black-rgb.png" class="slide-logo"></p>
<div class="footer footer-default">
<p>ETC3250/5250 Week 8</p>
</div>
</section>
    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="lecture-08_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="lecture-08_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="lecture-08_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="lecture-08_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="lecture-08_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="lecture-08_files/libs/revealjs/plugin/reveal-chalkboard/plugin.js"></script>
  <script src="lecture-08_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="lecture-08_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src="lecture-08_files/libs/revealjs/plugin/search/search.js"></script>
  <script src="lecture-08_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': false,
'previewLinksAuto': false,
'smaller': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleChalkboard(event)\"><kbd>b</kbd> Toggle Chalkboard</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleNotesCanvas(event)\"><kbd>c</kbd> Toggle Notes Canvas</a></li>\n<li class=\"slide-tool-item\" data-item=\"6\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.downloadDrawings(event)\"><kbd>d</kbd> Download Drawings</a></li>\n<li class=\"slide-tool-item\" data-item=\"7\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'chalkboard': {"buttons":true,"boardmarkerWidth":5},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: true,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: true,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1280,

        height: 720,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, RevealChalkboard, QuartoSupport,

          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    <link rel="stylesheet" href="assets/syntax-highlight.css">
    <link rel="stylesheet" href="assets/monash-after-body.css">
    <link rel="stylesheet" href="assets/fontawesome-free-6.1.1-web/css/all.css">
    <script src="assets/fontawesome-free-6.1.1-web/js/all.js"></script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const clipboard = new window.ClipboardJS('.code-copy-button', {
        target: function(trigger) {
          return trigger.previousElementSibling;
        }
      });
      clipboard.on('success', function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      });
      function tippyHover(el, contentFn) {
        const config = {
          allowHTML: true,
          content: contentFn,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'quarto-reveal',
          placement: 'bottom-start'
        };
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          return note.innerHTML;
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>